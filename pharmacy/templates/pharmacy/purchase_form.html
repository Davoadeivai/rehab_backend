{% extends 'base.html' %}
{% block content %}
<h2>{% if object %}ویرایش خرید دارو{% else %}ثبت خرید جدید{% endif %}</h2>
<form method="post">{% csrf_token %}
    {{ form.non_field_errors }}
    <div class="mb-3">
        {{ form.drug.label_tag }} {{ form.drug }} {{ form.drug.errors }}
    </div>
    <div class="mb-3">
        {{ form.supplier.label_tag }} {{ form.supplier }} {{ form.supplier.errors }}
    </div>
    <div class="mb-3">
        {{ form.quantity.label_tag }} {{ form.quantity }} {{ form.quantity.errors }}
    </div>
    <div class="mb-3">
        {{ form.purchase_price.label_tag }} {{ form.purchase_price }} {{ form.purchase_price.errors }}
    </div>
    <div class="mb-3">
        {{ form.purchase_date.label_tag }}
        <input type="text" id="jalali-purchase-date" name="purchase_date" class="form-control" autocomplete="off" value="{{ form.purchase_date.value|default:'' }}">
        {{ form.purchase_date.errors }}
    </div>
    <button type="submit" class="btn btn-success">ذخیره</button>
    <a href="{% url 'pharmacy:purchase_list' %}" class="btn btn-secondary">بازگشت</a>
</form>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/persian-datepicker@1.2.0/dist/css/persian-datepicker.min.css">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/persian-date@1.0.6/dist/persian-date.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/persian-datepicker@1.2.0/dist/js/persian-datepicker.min.js"></script>
<script>
$(function() {
  $("#jalali-purchase-date").persianDatepicker({
    format: 'YYYY/MM/DD',
    autoClose: true,
    initialValue: false
  });
});
</script>
{% endblock %} 